{% extends "base.html" %} {% block title %}Add New Market Price{% endblock %} {%
block content %}
<div class="container mt-4">
  <h1>
    <i class="fa-solid fa-plus-circle me-2"></i>Add New Official Market Price
  </h1>
  <p>Enter the details for a new official market price entry.</p>

  <form
    method="POST"
    action="{{ url_for('main.add_price') }}"
    class="needs-validation mt-4"
    novalidate
  >
    {{ form.csrf_token if form and form.csrf_token }}

    <div class="row g-3">
      <div class="col-md-6 mb-3">
        <label for="name" class="form-label"
          >Product Name <span class="text-danger">*</span></label
        >
        <input
          type="text"
          class="form-control"
          id="name"
          name="name"
          value="{{ form_data.get('name', '') }}"
          required
          autocomplete="off"
        />
        <div class="invalid-feedback">Product name is required.</div>
      </div>

      <div class="col-md-6 mb-3">
        <label for="category" class="form-label"
          >Category <span class="text-danger">*</span></label
        >
        <input
          type="text"
          class="form-control"
          id="category"
          name="category"
          value="{{ form_data.get('category', '') }}"
          placeholder="e.g., Vegetable, Fruit, Meat"
          required
          autocomplete="off"
        />
        <div class="invalid-feedback">Please enter or select a category.</div>
      </div>

      <div class="col-md-6 mb-3">
        <label for="price" class="form-label"
          >Price (PHP) <span class="text-danger">*</span></label
        >
        <input
          type="number"
          step="0.01"
          min="0"
          class="form-control"
          id="price"
          name="price"
          value="{{ form_data.get('price', '') }}"
          required
          autocomplete="off"
        />
        <div class="invalid-feedback">
          Please enter a valid price (e.g., 50.00).
        </div>
      </div>

      <div class="col-md-6 mb-3">
        <label for="unit" class="form-label"
          >Unit <span class="text-danger">*</span></label
        >
        <input
          type="text"
          class="form-control"
          id="unit"
          name="unit"
          placeholder="e.g., kg, piece, bundle, liter"
          value="{{ form_data.get('unit', '') }}"
          required
          autocomplete="off"
        />
        <div class="invalid-feedback">
          Please specify the unit (e.g., kg, piece).
        </div>
      </div>

      <div class="col-12 mb-3">
        <label for="location" class="form-label">Location (Optional)</label>
        <input
          type="text"
          class="form-control"
          id="location"
          name="location"
          placeholder="e.g., Daraga Public Market, Legazpi Market"
          value="{{ form_data.get('location', '') }}"
          autocomplete="off"
        />
        <div class="form-text">
          Specify the market or area where this price is applicable, if known.
        </div>
      </div>
    </div>

    <hr class="my-4" />

    <button class="btn btn-primary btn-lg" type="submit">
      Add Market Price
    </button>
    <a
      href="{{ url_for('main.admin_manage_prices') }}"
      class="btn btn-secondary btn-lg"
      >Cancel</a
    >
  </form>
</div>

{% endblock %} {% block body_end_extra %}
<script>
  // Example starter JavaScript for disabling form submissions if there are invalid fields (Optional but recommended)
  (function () {
    "use strict";
    var forms = document.querySelectorAll(".needs-validation");
    Array.prototype.slice.call(forms).forEach(function (form) {
      form.addEventListener(
        "submit",
        function (event) {
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add("was-validated");
        },
        false
      );
    });
  })();
</script>
{% endblock %}
s